<!DOCTYPE html PUBLIC>
<html lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>素数</title>

	<style>
		body 
		{
			height: 100%;
			margin:0;
			padding:0;

			font :16px "Meiryo UI";
			background: #eee;
			color : #777;
		}
		h1 {
			font-size:35px;
			margin-bottom:0px;

			border-bottom : solid 3px #777;
		}
		p {
			margin-bottom :20px;
		}
		#main 
		{
			min-height: 100%;
			margin :0 100px;
			padding: 0 80px;

			background: #fffffa;
			border-right : solid 1px #ccc;
			border-left : solid 1px #ccc;

			overflow: hidden;
		}
			#content
			{
				margin-bottom:200px;
				overflow: hidden;

			}
				#table
				{
					float : left;
					overflow: hidden;
				}
					.cell
					{
						width:30px;
						background: #fafafa;
						border : solid 1px  #fffffa;

						float : left;

						padding :20px;
					}

	</style>

	<script type="text/javascript">
		// num以下の素数を tag_name に列挙する
		function ListPrime(tag_name) {
			var str = "";
			var num = parseInt(document.getElementById('limit').value);
			var prm_ary = PrimeArray(num);

			str += "<div id=table>";
			for(i=0;i<prm_ary.length;i++) {
				str += '<div class="cell">'+prm_ary[i]+'</div>';
			}
			str += "</div>";

			document.getElementById(tag_name).innerHTML = str;
		}


		// num以下の素数の配列を返す
		function PrimeArray(num) {
			// 素数を格納する配列
			var ary = new Array();

			//2から順に素数であるか判定
			for(i=2;i<num+1;i++) {
				//その数以外で割り切れるかどうか
				var dvs = false;
				
				//iを2から順に割り切れるかを判定
				//2未満の数字で割り切れることはない、つまりその数の半分より高い数では割り切れることはない
				for(j=2;j<=i/2;j++) {
					//素数は1とその数以外で割り切れないので、
					//それ以外の数で割り切れた時点で 素数でない　と判定
					if(i%j == 0) {
						dvs = true;
						break;
					}
				}

				//それ以外の数全てで割り切れなかった場合、配列に追加
				if(!dvs) ary.push(i);
			}

			return ary;
		}
	</script>
</head>
<body>
	<div id="main">
		<h1>素数の列挙</h1>
		<div id="content">
			<form>
				<p>入力した数までの素数を列挙します。</p>
				<input id="limit" type="text" value="100">
				<input type="button" value="列挙"  onclick="ListPrime('list');">
			</form>
			<div id="list"></div>
		</div>
		<script>
			// for(i=0;i<100;i++) document.write('<div class=cell>あ</div>');
		</script>
	</div>
</body>
</html>